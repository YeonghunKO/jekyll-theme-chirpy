<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="다음 레벨 구현" /><meta property="og:locale" content="en" /><meta name="description" content="1. 다음 레벨 구현" /><meta property="og:description" content="1. 다음 레벨 구현" /><link rel="canonical" href="https://yeonghunko.github.io/posts/carrot7/" /><meta property="og:url" content="https://yeonghunko.github.io/posts/carrot7/" /><meta property="og:site_name" content="노력도 재능이다." /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-02-25T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="다음 레벨 구현" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"1. 다음 레벨 구현","url":"https://yeonghunko.github.io/posts/carrot7/","@type":"BlogPosting","headline":"다음 레벨 구현","dateModified":"2021-02-25T00:00:00+09:00","datePublished":"2021-02-25T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://yeonghunko.github.io/posts/carrot7/"},"@context":"https://schema.org"}</script><title>다음 레벨 구현 | 노력도 재능이다.</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="노력도 재능이다."><meta name="application-name" content="노력도 재능이다."><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/tourist.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">노력도 재능이다.</a></div><div class="site-subtitle font-italic">모든것을 흡수하려는 마음가짐</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/YeonghunKO" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['yhko1988','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>다음 레벨 구현</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>다음 레벨 구현</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> YeonghunKO </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Feb 25, 2021, 12:00 AM +0900" >Feb 25<i class="unloaded">2021-02-25T00:00:00+09:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1265 words">7 min read</span></div></div><div class="post-content"><h1 id="1-다음-레벨-구현">1. 다음 레벨 구현</h1><p>어떻게 하면 다음 레벨로 넘어갈 수 있을까? 내가 생각한 알고리즘은 이거다. 게임에서 이길때마다, 아이템의 갯수를 증가시킨다. 그리고 게임을 하나 더 만들어서 증가된 아이콘을 새로운 게임에 pass한다음 실행한다.</p><p>그래서 이런식으로 코드를 적었다.</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">Stage</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">gameStarter</span> <span class="o">=</span> <span class="p">(</span><span class="nx">level</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">IconCount</span> <span class="o">=</span> <span class="nx">level</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">Duration</span> <span class="o">=</span> <span class="nx">level</span> <span class="o">+</span> <span class="mi">4</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">game</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GameBuilder</span><span class="p">()</span> <span class="c1">//</span>
    <span class="p">.</span><span class="nx">iconCount</span><span class="p">(</span><span class="nx">IconCount</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">gameDuration</span><span class="p">(</span><span class="nx">Duration</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">build</span><span class="p">();</span>
  <span class="nx">finishBannerFunc</span><span class="p">(</span><span class="nx">game</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">game</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">gameStarter</span><span class="p">(</span><span class="nx">Stage</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">finishBannerFunc</span><span class="p">(</span><span class="nx">game</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">game</span><span class="p">.</span><span class="nx">onFinishBannerEvent</span><span class="p">((</span><span class="nx">reason</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">finishBanner</span><span class="p">.</span><span class="nx">hideNextStageBtn</span><span class="p">();</span>
    <span class="k">switch</span> <span class="p">(</span><span class="nx">reason</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="nx">FinishReason</span><span class="p">.</span><span class="na">win</span><span class="p">:</span>
        <span class="nx">finishBanner</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="dl">"</span><span class="s2">win</span><span class="dl">"</span><span class="p">);</span>
        <span class="nx">sound</span><span class="p">.</span><span class="nx">playWinSound</span><span class="p">();</span>
        <span class="nx">finishBanner</span><span class="p">.</span><span class="nx">showNextStageBtn</span><span class="p">();</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="nx">FinishReason</span><span class="p">.</span><span class="na">bug</span><span class="p">:</span>
        <span class="nx">finishBanner</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="dl">"</span><span class="s2">lose</span><span class="dl">"</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="nx">FinishReason</span><span class="p">.</span><span class="na">timeout</span><span class="p">:</span>
        <span class="nx">finishBanner</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="dl">"</span><span class="s2">timeout</span><span class="dl">"</span><span class="p">);</span>
        <span class="nx">sound</span><span class="p">.</span><span class="nx">playLoseSound</span><span class="p">();</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="nx">StopReason</span><span class="p">.</span><span class="na">start</span><span class="p">:</span>
        <span class="nx">finishBanner</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="nx">StopReason</span><span class="p">.</span><span class="na">pause</span><span class="p">:</span>
        <span class="nx">finishBanner</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="dl">"</span><span class="s2">restart</span><span class="dl">"</span><span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="nl">default</span><span class="p">:</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">unvalid reason</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="nx">finishBanner</span><span class="p">.</span><span class="nx">setOnNextStageClick</span><span class="p">(</span><span class="nx">gameStarter</span><span class="p">);</span>

  <span class="nx">finishBanner</span><span class="p">.</span><span class="nx">setOnReplayClick</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">startFromTheVeryFirst</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>최초 gameStarter는 stage = 1이다. 그리고 banner와 setclick 함수를 finishBannerFunc함수안에다 넣고 gameStarter 안에다가 넣었다. 이럼 어떻게 될까? 사실 replay 버튼은 문제없이 실행이 되었다. 그런데 nextclick 을 눌렀을때 아이템은 계속 증가된 채로 나왔다. 근데 문제는 타이머다. 일시정지를 누를때 타이머가 갑자기 중지가 된다. 그것도 ‘여러번’. 디버깅을 해보니깐. 다음 stage가 실행될때 그 전의 stage 모두 함께 실행된다는 것.</p><p>다시말해, 2단계부터(1단계는 전혀 문제없다) pause를 누를때 level1에 있는 pause, icon 까지 눌러지고, level1에 있는 timer까지 작동한다는거다. level3으로 넘어가면 level1, leve2, level3 에 있는 pause 버튼과 아이콘이 모두 함께 작동한다.</p><p>웬지 콜백지옥과 비슷한 구조라고 생각했다. 그래서 promise.then(game =&gt; ‘그 다음 game’)으로 해결하려고 했는데 ‘그 다음 game’이 맨처음부터 바로 실행이 되었다. 시도는 좋았으나 promise는 게임을 순차적으로 만들어내기만 하지 내가 게임을 끝냈는지 알아차리지는 못했다.</p><p>replay버튼은 전혀 문제가 없는 걸로 보아 replay에서 뭔가 답을 찾을 수 있을것 같긴 했지만 도무지 방법이 나오지 않았다. 그래서 4일간 온갖 방법을 시도해보다가 결국 못찾고 늘어져서 dreamcoding 슬랙에 도움을 요청했다. 그러나 아무도 도와주지 않았다. 당연하다. 나또한 이 그렇게 장황한 설명과 코드를 보면 도와줄 마음이 생길것 같지 않았다. 따라서 level up에 성공한 다른 분들을 슬랙에서 찾기 시작했고 다행히 발견하여 그 분께 메세지를 보내어 코드를 공유해줄 수 있냐고 물었다. 다행히 허락하셨고 코드를 봤는데 level up 방법은 너무나 간단하였다..</p><p>새로운 문법을 적용하거나 복잡한 코드를 추가하지 않아도 되었다.</p><p>새로운게임을 만들지말고 기존 게임만 가지고 가되 다음 버튼을 클릭할때 레벨을 하나 올리고 그 레벨에 따라서 display되는 icon의 수를 늘려주기만 하면 되는거였다. 하하 그래서 추가한 코드는 아래와 같다.</p><h1 id="2-다음레벨-구현-코딩">2. 다음레벨 구현 코딩</h1><p>finishBanner.js</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">this</span><span class="p">.</span><span class="nx">nextStageBtn</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">game</span><span class="p">.</span><span class="nx">levelUp</span><span class="p">();</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">onNextBtnClick</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">onNextBtnClick</span><span class="p">();</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
<span class="p">});</span>
</pre></table></code></div></div><p>일단 next버튼을 누르면 레벨이 올라가도록 했다.</p><p>gameControl.js</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nx">Game</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="nx">iconCount</span><span class="p">,</span> <span class="nx">gameDuration</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">level</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">init</span><span class="p">(</span><span class="nx">level</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">level</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">.</span><span class="nx">displayAllIcon</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">iconCount</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">level</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">.</span><span class="nx">displayAllIcon</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">iconCount</span> <span class="o">+</span> <span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">level</span> <span class="o">===</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">.</span><span class="nx">displayAllIcon</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">iconCount</span> <span class="o">+</span> <span class="mi">4</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">level</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">.</span><span class="nx">displayAllIcon</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">iconCount</span> <span class="o">+</span> <span class="mi">6</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">startFromTheVeryFirst</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">level</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">levelUp</span><span class="p">()</span> <span class="p">{</span>
    <span class="o">++</span><span class="k">this</span><span class="p">.</span><span class="nx">level</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">levelInitalized</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">level</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">countCarrotFunc</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">carrotCount</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">field</span><span class="p">.</span><span class="nx">carrotCount</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">carrotCount</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">level</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">finish</span><span class="p">(</span><span class="nx">FinishReason</span><span class="p">.</span><span class="nx">finalStageWin</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">finish</span><span class="p">(</span><span class="nx">FinishReason</span><span class="p">.</span><span class="nx">win</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">countSpan</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">carrotCount</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">countSpan</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">carrotCount</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>그리고 처음엔 레벨이 1이고 성공했을경우 레벨이 올라가면서 표시되는 아이템의 양도 많아지게했다. 또한 마지막 레벨에 도달했을때 완전히 끝내도록 했다.</p><p>main.js</p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span text-data=" JavaScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nx">finishBanner</span><span class="p">.</span><span class="nx">setOnNextStageClick</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">startFromTheVeryFirst</span><span class="p">);</span>

<span class="nx">finishBanner</span><span class="p">.</span><span class="nx">setOnReplayClick</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">startFromTheVeryFirst</span><span class="p">);</span>
</pre></table></code></div></div><p>새로운 게임을 만들지 않고 하나의 게임을 만들고 시작버튼을 각각 부여하였다. 그래서 클릭될때마다 하나의 게임 클래스만 실행되기에 시계가 중복될 이유가 없다.</p><p>잘된다!! 드뎌 해냈다. 그럼 이제 기록 기능을 구현해보자.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/javascript/'>Javascript</a>, <a href='/categories/carrot-game/'>carrot-game</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=다음 레벨 구현 - 노력도 재능이다.&url=https://yeonghunko.github.io/posts/carrot7/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=다음 레벨 구현 - 노력도 재능이다.&u=https://yeonghunko.github.io/posts/carrot7/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=다음 레벨 구현 - 노력도 재능이다.&url=https://yeonghunko.github.io/posts/carrot7/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/clone4/">http://donicaida.com</a><li><a href="/posts/clone3/">https://paint-box.com 2</a><li><a href="/posts/clone2/">https://paint-box.com 1</a><li><a href="/posts/clone1/">https://besthorrorscenes.com - html 구조</a><li><a href="/posts/basic1/">flex 하게 소리질러!!</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/blogging/">blogging</a> <a class="post-tag" href="/tags/class/">class</a> <a class="post-tag" href="/tags/debugging/">debugging</a> <a class="post-tag" href="/tags/delegation/">delegation</a> <a class="post-tag" href="/tags/load/">load</a> <a class="post-tag" href="/tags/advanced-calulator/">advanced calulator</a> <a class="post-tag" href="/tags/api/">api</a> <a class="post-tag" href="/tags/article/">article</a> <a class="post-tag" href="/tags/async-await/">async/await</a> <a class="post-tag" href="/tags/beforeunload/">beforeunload</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/carrot4/"><div class="card-body"> <span class="timeago small" >Feb 24<i class="unloaded">2021-02-24T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>playField,finsishBanner 리팩토링</h3><div class="text-muted small"><p> 1. 함수하나당 하나의 기능만 수행 지금 기존의 함수를 보면은 displayAll에서 carrotcount가 들어가 있고 startGame 함수에서도 게임을 시작하는것 뿐만 아니라 일시중지, 다시시작하는 기능까지 들어있다. 또한 data.json을 이용해서 다량의 아이콘을 만들었는데 그럴필요없이 for문을 사용하면 된다. 참!! 본격적으로 리팩토링...</p></div></div></a></div><div class="card"> <a href="/posts/carrot5/"><div class="card-body"> <span class="timeago small" >Feb 24<i class="unloaded">2021-02-24T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>시작버튼 리팩토링(gameControl.js)</h3><div class="text-muted small"><p> 1. top_ui 리팩토링 gameControl.js 파일 'use strict'; import * as sound from './sound.js'; import Field from './playField.js'; export const FinishReason = Object.freeze({ win: 'win', bug: 'bug', ...</p></div></div></a></div><div class="card"> <a href="/posts/carrot6/"><div class="card-body"> <span class="timeago small" >Feb 24<i class="unloaded">2021-02-24T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>main.js에 게임 선언</h3><div class="text-muted small"><p> 1.main.js에 게임을 선언하기 "use strict"; import { Game, FinishReason, StopReason } from "./gameControl.js"; import Banner from "./finishBanner.js"; import * as sound from "./sound.js"; const finishBann...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/carrot6/" class="btn btn-outline-primary" prompt="Older"><p>main.js에 게임 선언</p></a> <a href="/posts/carrot8/" class="btn btn-outline-primary" prompt="Newer"><p>기록 기능 구현</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/username">YeonghunKO</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/blogging/">blogging</a> <a class="post-tag" href="/tags/class/">class</a> <a class="post-tag" href="/tags/debugging/">debugging</a> <a class="post-tag" href="/tags/delegation/">delegation</a> <a class="post-tag" href="/tags/load/">load</a> <a class="post-tag" href="/tags/advanced-calulator/">advanced calulator</a> <a class="post-tag" href="/tags/api/">api</a> <a class="post-tag" href="/tags/article/">article</a> <a class="post-tag" href="/tags/async-await/">async/await</a> <a class="post-tag" href="/tags/beforeunload/">beforeunload</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://YeonghunKO.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
